{% extends 'base.html' %}
{% load static %}
{% block title %}
    <title>Find Your Dream Job with UmEmployed</title>
    {% endblock title %}
{% block content %}

    <main>
      <section id="search-ctn-mobile" class="my-5 lg:hidden">
        <div
          class="search-wrapper flex max-w-[90%] mx-auto bg-white px-4 py-2 border rounded-full shadow sm:shadow-none"
        >
          <input
            class="flex-1 p-2 focus:outline-none overflow-hidden text-ellipsis"
            type="text"
            name="search"
            id="search"
            placeholder="Search jobs, companies, or keywords"
          />
          <div class="border-l border-gray-300 mx-2 hidden sm:block"></div>
          <div class="border-l border-gray-300 mx-2 hidden lg:block"></div>
          <div class="button-wrap">
            <button class="text-white bg-[#1e90ff] rounded-full py-2 px-4">
              <i class="fas fa-search"></i>
            </button>
          </div>
        </div>
      </section>
      <section
        class=" container mx-auto hero-section lg:flex lg:flex-row items-center justify-between bg-white lg:h-[500px] p-6 lg:p-12 relative"
      >
        <!-- Text Section -->
        <div class="text-container lg:w-1/2 text-center lg:text-left z-10">
          <h2
            class="text-3xl md:text-4xl lg:text-5xl font-extrabold text-gray-900 mb-4"
          >
            Discover Your Next Career Move.
            <br />
            <span class="text-[#1e90ff]">Make it Happen</span>
          </h2>
          <p class="mb-6 text-base md:text-lg text-gray-600 leading-relaxed">
            Browse thousands of job listings and seize the opportunity to
            advance your career.
          </p>
          <a
            href="{% url 'dashboard' %}"
            class="inline-block px-8 py-3 bg-[#1e90ff] text-white font-semibold rounded-md transition-all duration-200 hover:bg-[#005b8c]"
          >
            Get Started
          </a>
        </div>

        <!-- Carousel Container -->
        <div
          class="image-container lg:w-1/2 mt-8 lg:mt-0 relative hidden lg:block"
        >
          <div
            class="relative w-full h-64 lg:h-96 overflow-hidden rounded-md shadow-lg"
          >
            <!-- Carousel Images -->
            <div
              id="carousel"
              class="absolute inset-0 flex transition-transform duration-1000"
            >
              <!-- Image 1 -->
              <div class="w-full h-full flex-shrink-0">
                <div class="relative w-full h-full">
                  <img
                    src="{% static 'new_design/images/heroImage.png' %}"
                    alt="Image 1"
                    class="w-full h-full object-cover"
                  />
                  <div
                    class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-6"
                  >
                    <h2
                      class="text-white text-xl md:text-2xl lg:text-3xl font-bold text-center"
                    >
                      Empowering Your Career Journey
                    </h2>
                  </div>
                </div>
              </div>
              <!-- Image 2 -->
              <div class="w-full h-full flex-shrink-0">
                <div class="relative w-full h-full">
                  <img
                    src="{% static 'new_design/images/view-3d-businessman.png' %}"
                    alt="Image 2"
                    class="w-full h-full object-cover"
                  />
                  <div
                    class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-6"
                  >
                    <h2
                      class="text-white text-xl md:text-2xl lg:text-3xl font-bold text-center"
                    >
                      Unlock Your Potential with Us
                    </h2>
                  </div>
                </div>
              </div>
              <!-- Image 3 -->
              <div class="w-full h-full flex-shrink-0">
                <div class="relative w-full h-full">
                  <img
                    src="{% static 'new_design/images/cartoon-ai-robot-scene.png' %}"
                    alt="Image 3"
                    class="w-full h-full object-cover"
                  />
                  <div
                    class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-6"
                  >
                    <h2
                      class="text-white text-xl md:text-2xl lg:text-3xl font-bold text-center"
                    >
                      Your Success, Our Mission
                    </h2>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Navigation Dots -->
          <div
            class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-3"
          >
            <span
              class="dot w-3 h-3 bg-gray-300 rounded-full cursor-pointer"
              onclick="setCurrentSlide(0)"
            ></span>
            <span
              class="dot w-3 h-3 bg-gray-300 rounded-full cursor-pointer"
              onclick="setCurrentSlide(1)"
            ></span>
            <span
              class="dot w-3 h-3 bg-gray-300 rounded-full cursor-pointer"
              onclick="setCurrentSlide(2)"
            ></span>
          </div>
        </div>
      </section>

      <section class="container px-4 mx-auto py-12">
        <!-- Section Header -->
        <div class="mb-8">
          <h2 class="text-3xl font-bold text-gray-900">
            Featured Opportunities
          </h2>
          <p class="text-gray-600 text-xl">
            Find the best jobs tailored to your skills and preferences.
          </p>
        </div>

        <!-- Navigation Buttons -->
        <div
          class="hidden lg:flex justify-end gap-4 lg:mr-10 items-center mb-4"
        >
          <button
            class="px-4 py-2 bg-gray-200 rounded-full hover:bg-gray-300"
            id="scrollLeft"
          >
            <i class="fas fa-chevron-left text-gray-600"></i>
          </button>
          <button
            class="px-4 py-2 bg-gray-200 rounded-full hover:bg-gray-300"
            id="scrollRight"
          >
            <i class="fas fa-chevron-right text-gray-600"></i>
          </button>
        </div>

       <!-- Job Cards Scrollable Container -->
<div class="flex gap-6 overflow-x-auto px-4 mx-auto scroll-smooth snap-x snap-mandatory" id="jobCardsContainer">
  {% if recent_jobs %}
    {% for job in recent_jobs %}
    <!-- Repeat the Job Cards multiple times as needed -->
    <div class="min-w-[100%] sm:min-w-[50%] lg:min-w-[22.99%] bg-white border rounded-lg p-6 snap-start">
      <div class="flex items-center justify-between mb-4">
        <img class="w-12 h-12 rounded-full mr-4" src="{{job.company.logo.url}}" alt="Company Logo" />
        <div>
          <span class="text-sm text-gray-500">{{job.job_type}}</span>
        </div>
      </div>
      
      <div class="mb-4">
        <h3 class="text-xl font-semibold text-gray-800 truncate">{{ job.title }}</h3>
        <div class="flex items-center gap-2 truncate">
          <span class="text-gray-600">{{job.company.name}}</span>
          <span class="text-gray-500" style="font-size: 16px;">{{ job.created_at|timesince }} ago</span>
        </div>
      </div>
      
      <p class="text-[#1e90ff] font-semibold text-sm p-1 bg-[rgba(30,144,250,0.1)] w-fit rounded mb-4 flex items-center">
        <i class="fas fa-map-marker-alt mr-2"></i> {{job.location.name}}
      </p>
      
      <p class="text-gray-800 mb-4 flex items-center">
        ${{job.salary_range}} / year
      </p>

      <!-- Bookmark Icon -->
      <div class="flex items-center justify-between">
        {% if job.id in saved_jobs %}
        <!-- Show filled bookmark if job is saved -->
        <a class="bookmark-job" data-job-id="{{ job.id }}">
          <i class="fas fa-bookmark text-[#1e90ff] text-xl"></i>
        </a>
        {% else %}
        <!-- Show empty bookmark if job is not saved -->
        <a class="bookmark-job" data-job-id="{{ job.id }}">
          <i class="far fa-bookmark text-gray-500 text-xl hover:text-[#1e90ff]"></i>
        </a>
        {% endif %}
        
        <!-- Apply Now Button or Already Applied -->
        {% if job.id in applied_job_ids %}
        <span style="color: green;">(Already Applied)</span>
        {% else %}
        <div class="mt-4">
          <a href="{% url 'job:job_details' job.id %}">
            <button class="bg-[#1e90ff] text-white font-bold py-2 px-4 rounded-full hover:bg-blue-400 w-full">
              Apply Now
            </button>
          </a>
        </div>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  {% endif %}
</div>

      </section>

      <section class="container mx-auto bg-hray-100 sm:bg-white pb-2">
        <div
          class="flex gap-4 flex-col lg:flex-row gap-y-8 items-center w-full mb-8 lg:mb-0"
        >
          <img
            src="{% static 'new_design/images/create.png' %}"
            alt=""
            class="lg:w-1/2 w-full flex-1"
          />
          <div class="lg:w-1/2 w-full flex flex-col items-center">
            <h2
              class="font-bold text-2xl md:text-3xl lg:text-4xl text-center mb-4"
            >
              Let's get you Started
            </h2>
            <p class="text-gray-800 mb-8 text-xl text-center px-4">
              Complete your profile to unlock more features and Opportunities
            </p>
            <a
              href="{% url 'dashboard' %}"
              class="bg-[#1e90ff] text-white px-4 py-2 rounded-lg font-semibold"
              >Create Profile</a
            >
          </div>
        </div>
        <div
          class="flex gap-4 flex-col lg:flex-row gap-y-8 items-center w-full mb-8 lg:mb-0"
        >
          <div
            class="lg:w-1/2 w-full flex flex-col items-center order-2 lg:order-1"
          >
            <h2
              class="font-bold text-2xl md:text-3xl lg:text-4xl text-center mb-4"
            >
              Your Employers
            </h2>
            <p class="text-gray-800 mb-8 text-xl text-center px-4">
              See who hires on UmEmployed and discover how our platform helps
              you find top talent and streamline your hiring process.
            </p>
            <a
              href="{% url 'home' %}"
              class="bg-[#1e90ff] text-white px-4 py-2 rounded-lg font-semibold"
              >View More</a
            >
          </div>
          <img
            src="{% static 'new_design/images/employers.png' %}"
            alt=""
            class="lg:w-1/2 w-full flex-1 order-1"
          />
        </div>
        <div
          class="flex gap-4 flex-col lg:flex-row gap-y-8 items-center w-full mb-8 lg:mb-0"
        >
          <img src="{% static 'new_design/images/learn.png' %}" alt="" class="lg:w-1/2 w-full flex-1" />
          <div class="lg:w-1/2 w-full flex flex-col items-center">
            <h2
              class="font-bold text-2xl md:text-3xl lg:text-4xl text-center mb-4"
            >
              How It Works
            </h2>
            <p class="text-gray-800 mb-8 text-xl text-center px-4">
              Learn how to utilize our features to enhance your job search
              experience.
            </p>
            <a
              href="{% url 'feature-not-implemented' %}"
              class="bg-[#1e90ff] text-white px-4 py-2 rounded-lg font-semibold"
              >Learn More</a
            >
          </div>
        </div>
      </section>
      <section class="container px-4 mx-auto py-12">
        <!-- Section Header -->
        <div class="mb-8 text-center">
          <h2 class="text-3xl font-extrabold text-gray-900">
            Featured Companies
          </h2>
          <p class="text-gray-600 mt-2">
            Explore top companies actively hiring on our platform.
          </p>
        </div>

        <!-- Companies Grid -->
        <div class="grid gap-8 lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-2">
          {% if featured_companies %}
          {% for company in featured_companies %}
          <!-- Company 1 -->
          <div
            class="bg-white shadow-lg rounded-lg p-6 text-center transform hover:scale-105 transition-transform duration-300"
          >
            <img
              class="w-20 h-20 mx-auto mb-4"
              src="{{company.logo.url}}"
              alt="{{company.name}} Logo"
            />
            <h3 class="text-lg font-semibold text-gray-900">{{company.name}}</h3>
            <p class="text-sm text-gray-500">{{company.industry}}</p>
            <a
              href="{% url 'home' %}"
              class="text-[#1e90ff] font-semibold hover:text-blue-500 mt-4 inline-block"
              >View Jobs</a
            >
          </div>
          {% endfor %}
          {% endif %}

         </div>

        <!-- Call to Action Button -->
        <div class="mt-8 text-center">
          <a
            href="{% url 'feature-not-implemented' %}"
            class="bg-[#1e90ff] text-white font-bold py-4 px-4 rounded-lg hover:bg-blue-400"
          >
            Explore All Companies
          </a>
        </div>
      </section>

      <section id="Testimonial" class="bg-gray-100 py-12 px-4 lg:px-0">
        <div class="container px-4 mx-auto lg:px-8">
          <!-- Section Header -->
          <div class="mb-8 text-center">
            <h2 class="text-3xl font-extrabold text-gray-900">
              What Our Users Say
            </h2>
            <p class="text-gray-600 mt-2 text-xl">
              Hear from job seekers and employers who found success on our
              platform.
            </p>
          </div>
          <!-- Testimonials Grid -->
          <div class="relative">
            <!-- Left Navigation Button (for desktop) -->
            <button
              class="hidden lg:flex absolute left-0 top-1/2 transform -translate-y-1/2 bg-white text-gray-500 hover:text-gray-900 shadow-lg rounded-full py-2 px-4 focus:outline-none"
            >
              <i class="fas fa-chevron-left text-xl"></i>
            </button>

            <!-- Testimonials -->
            <div
              id="Testimonials-ctn"
              class="flex gap-6 lg:gap-8 container px-4 overflow-auto"
            >
              <!-- Testimonial 1 -->
              <div class="bg-white shadow-lg rounded-lg min-w-[300px] p-6">
                <div class="flex items-center mb-4">
                  <img
                    class="w-16 h-16 rounded-full"
                    src="{% static 'new_design/images/medium-shot-smiley-man-outdoors.png' %}"
                    alt="User Photo"
                  />
                  <div class="ml-4">
                    <h3 class="text-lg font-semibold text-gray-900">
                      Jane Smith
                    </h3>
                    <p class="text-sm text-gray-600">
                      Marketing Manager at Facebook
                    </p>
                  </div>
                </div>
                <p class="text-gray-600">
                  "This platform helped me land my dream job! The process was
                  seamless and I found a position that perfectly matched my
                  skills."
                </p>
              </div>

              <!-- Testimonial 2 -->
              <div class="bg-white shadow-lg rounded-lg min-w-[300px] p-6">
                <div class="flex items-center mb-4">
                  <img
                    class="w-16 h-16 rounded-full"
                    src="{% static 'new_design/images/portrait-young-handsome-man.png' %}"
                    alt="User Photo"
                  />
                  <div class="ml-4">
                    <h3 class="text-lg font-semibold text-gray-900">
                      John Doe
                    </h3>
                    <p class="text-sm text-gray-600">
                      Software Engineer at Google
                    </p>
                  </div>
                </div>
                <p class="text-gray-600">
                  "As an employer, I found the perfect candidates quickly and
                  easily. The tools provided made the hiring process efficient
                  and straightforward."
                </p>
              </div>

              <!-- Testimonial 3 -->
              <div class="bg-white shadow-lg rounded-lg min-w-[300px] p-6">
                <div class="flex items-center mb-4">
                  <img
                    class="w-16 h-16 rounded-full"
                    src="{% static 'new_design/images/portrait-young-woman-smiling-isolated.png' %}"
                    alt="User Photo"
                  />
                  <div class="ml-4">
                    <h3 class="text-lg font-semibold text-gray-900">
                      Emily Johnson
                    </h3>
                    <p class="text-sm text-gray-600">UX Designer at Amazon</p>
                  </div>
                </div>
                <p class="text-gray-600">
                  "The job portal provided me with amazing opportunities. I was
                  able to connect with top companies and secure a great role in
                  no time."
                </p>
              </div>
            </div>

            <!-- Right Navigation Button (for desktop) -->
            <button
              class="hidden lg:flex absolute right-0 top-1/2 transform -translate-y-1/2 bg-white text-gray-500 hover:text-gray-900 shadow-lg rounded-full py-2 px-4 focus:outline-none"
            >
              <i class="fas fa-chevron-right text-xl"></i>
            </button>
          </div>
        </div>
      </section>

      <section class="container px-4 mx-auto p-20">
        <div class="flex items-center flex-col gap-6">
          <h2
            class="text-gray-900 text-2xl md:text-3xl lg:text-4xl font-semibold text-center"
          >
            What are you waiting to Browse Jobs?
          </h2>
          <a href="{% url 'home' %}" class="bg-[#1e90ff] text-white px-6 py-3 rounded-lg"
            >Browse Jobs</a
          >
        </div>
      </section>
    </main>

    <script>
$(document).ready(function() {
    // Handle bookmark job click
    $('.bookmark-job').on('click', function(e) {
        e.preventDefault();  // Prevent the default anchor tag behavior (adding #)
        
        const jobId = $(this).data('job-id');
        const bookmarkIcon = $(this).find('i');  // Get the icon element
        
        console.log("Bookmarking job with ID:", jobId);  // Debugging output

        $.ajax({
            url: '/job/save-job/' + jobId + '/',
            type: 'POST',
            headers: {
                'X-CSRFToken': '{{ csrf_token }}',  // Ensure you send the CSRF token
            },
            success: function(response) {
                console.log(response);  // Log the server response
                // Toggle bookmark icon on success
                if (response.status === 'saved') {
                    bookmarkIcon.removeClass('far fa-bookmark text-gray-500').addClass('fas fa-bookmark text-[#1e90ff]');
                } else if (response.status === 'removed') {
                    bookmarkIcon.removeClass('fas fa-bookmark text-[#1e90ff]').addClass('far fa-bookmark text-gray-500');
                }
            },
            error: function(xhr, status, error) {
                console.error('Error:', status, error);  // Log the error
                alert('An error occurred while saving the job.');
            }
        });
    });
});

    </script> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    {% endblock %}