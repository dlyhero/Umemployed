{% extends 'resume/base.html' %}
{% load static %}
{% block custom_css %}
<link rel="stylesheet" href="{% static './build/css/general.css' %}" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{% static 'build/css/header.css' %}" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="stylesheet" href="{% static 'build/css/sidebar_recriuter.css' %}" />
<style>
      @keyframes fade-in {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }

        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .animate-fade-in {
        animation: fade-in 0.3s ease-out;
      }

      /* Custom modal styles */
      .modal-content {
        max-width: 90%;
        width: 100%;
        max-height: 90%;
        overflow: auto;
        padding: 2rem;
      }

      @media (min-width: 640px) {
        .modal-content {
          width: 90%;
          max-width: 500px;
          padding: 3rem;
        }
      }
    </style>{% endblock %}
{% block content %}

     {% comment %} <main class="bg-white shadow-md rounded-lg p-8 w-[95%] md:w-[50%] max-w-md mx-auto mt-28">
      {% if messages %}
    <div>
        {% for message in messages %}
            <div class="alert {{ message.tags }}">{{ message }}</div>
        {% endfor %}
    </div>
{% endif %}
        <h1 class="text-2xl text-gray-800 font-bold text-center mb-6">Switch Account Type</h1>
        <center><p>{{user.username}}</p><center>
        <div class="text-center mb-4">
          {% if request.user.is_applicant %}
            <button id="toggleAccountButton" class="bg-[#1e90ff] hover:bg-blue-500 text-white font-bold py-2 px-4 rounded">
                <a href="{% url 'switch_account_type' %}">Switch to Employer Account</a>
            </button>
            {% elif request.user.is_recruiter %}
            <button id="toggleAccountButton" class="bg-[#1e90ff] hover:bg-blue-500 text-white font-bold py-2 px-4 rounded">
                <a href="{% url 'switch_account_type' %}">Switch to Job Seeker Account</a>
            </button>
            {% else %}
            <button id="toggleAccountButton" class="bg-[#1e90ff] hover:bg-blue-500 text-white font-bold py-2 px-4 rounded">
                <a href="{% url 'login' %}">Not Allowed, Please Signup</a>
            </button>
            {% endif %}
        </div>
        <div id="accountTypeMessage" class="text-center text-gray-700">
            You are currently logged in as a Job Seeker.
        </div>
    </main>

   
    <script type="module" src="{% static '{% staticbuild/scripts/switchaccount.js' %}' %}"></script>
  </body>
</html> {% endcomment %}

<main class="md:bg-white w-[90%] flex-1 h-fit mt-[5%] max-w-6xl mx-auto p-3 md:p-12 sm:rounded-lg sm:shadow-lg animate-fade-in">
    <h1 class="text-2xl md:text-3xl font-bold text-center mb-6 md:mb-8 text-gray-800">
        Switch Account Type
    </h1>
    <div id="currentAccountTypeContainer" class="p-4 rounded-lg mb-6 bg-blue-100 border-l-4 border-blue-500">
        <h2 id="currentAccountType" class="text-lg md:text-xl font-medium text-gray-700">
            Current Account Type: {{ request.user.is_applicant|yesno:"Job Seeker,Employer" }}
        </h2>
    </div>
    <div class="text-center mb-6">
        <p class="text-sm md:text-base text-gray-600">
            To switch your account type, please choose the option that best fits your needs. Each option provides different functionalities suited for your goals. Review the descriptions below to make an informed decision.
        </p>
    </div>
    <div class="flex flex-col md:flex-row gap-6 md:gap-8">
        <!-- Job Seeker Container -->
        <div class="flex-1 p-12 bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-gray-50 transition duration-200 ease-in-out cursor-pointer flex flex-col items-center" onclick="handleButtonClick('Job Seeker')">
            <div class="flex items-center mb-4">
                <i class="fas fa-search fa-2x text-blue-500"></i>
            </div>
            <div class="text-center">
                <h2 class="text-lg md:text-xl font-semibold text-gray-800 mb-2">
                    Job Seeker
                </h2>
                <p class="text-sm md:text-base text-gray-600 mb-4">
                    Search for jobs and apply to your dream positions.
                </p>
                <button id="jobSeekerButton" class="bg-blue-600 font-semibold text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200 ease-in-out w-full md:w-auto">
                    <!-- Button text will be updated by JavaScript -->
                </button>
            </div>
        </div>
        <!-- Employer Container -->
        <div class="flex-1 p-12 bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-gray-50 transition duration-200 ease-in-out cursor-pointer flex flex-col items-center" onclick="handleButtonClick('Employer')">
            <div class="flex items-center mb-4">
                <i class="fas fa-briefcase fa-2x text-blue-500"></i>
            </div>
            <div class="text-center">
                <h2 class="text-lg md:text-xl font-semibold text-gray-800 mb-2">
                    Employer
                </h2>
                <p class="text-sm md:text-base text-gray-600 mb-4">
                    Post jobs and find the best candidates.
                </p>
                <button id="employerButton" class="bg-blue-600 font-semibold text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200 ease-in-out w-full md:w-auto">
                    <!-- Button text will be updated by JavaScript -->
                </button>
            </div>
        </div>
    </div>
</main>

<div id="confirmationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
    <div class="bg-white rounded-lg shadow-lg modal-content animate-fade-in p-6">
        <h3 class="text-xl md:text-2xl font-medium mb-4 text-gray-800 text-center">
            Confirm Account Switch
        </h3>
        <p class="text-gray-600 mb-6 text-center">
            Are you sure you want to switch to the <span id="selectedAccountType" class="font-semibold text-gray-800"></span> account type?
        </p>
        <div class="flex justify-center gap-4">
            <button class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition duration-200 ease-in-out" onclick="confirmSwitch()">
                Yes
            </button>
            <button class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition duration-200 ease-in-out" onclick="hideModal()">
                No
            </button>
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        updateButtonText();
    });

    function updateButtonText() {
        const currentAccountType = document.getElementById("currentAccountType").innerText.split(": ")[1];
        if (currentAccountType === "Job Seeker") {
            document.getElementById("jobSeekerButton").innerText = "Go to Dashboard";
            document.getElementById("jobSeekerButton").onclick = function () {
                window.location.href = "#";
            };
            document.getElementById("employerButton").innerText = "Switch to Employer";
        } else if (currentAccountType === "Employer") {
            document.getElementById("employerButton").innerText = "Go to Dashboard";
            document.getElementById("employerButton").onclick = function () {
                window.location.href = "{% url 'switch_account_type' %}";
            };
            document.getElementById("jobSeekerButton").innerText = "Switch to Job Seeker";
        }
    }

    function handleButtonClick(accountType) {
        const currentAccountType = document.getElementById("currentAccountType").innerText.split(": ")[1];
        if (currentAccountType === accountType) {
            if (accountType === "Job Seeker") {
                window.location.href = "{% url 'switch_account_type' %}";
            } else if (accountType === "Employer") {
                window.location.href = "{% url 'switch_account_type' %}";
            }
        } else {
            showModal(accountType);
        }
    }

    function showModal(accountType) {
        document.getElementById("selectedAccountType").innerText = accountType;
        document.getElementById("confirmationModal").classList.remove("hidden");
    }

    function hideModal() {
        document.getElementById("confirmationModal").classList.add("hidden");
    }

    function confirmSwitch() {
        const selectedAccountType = document.getElementById("selectedAccountType").innerText;
        if (selectedAccountType === "Job Seeker") {
            window.location.href = "{% url 'switch_account_type' %}";
        } else if (selectedAccountType === "Employer") {
            window.location.href = "{% url 'switch_account_type' %}";
        }
    }
</script>
<br><br><br><br><br>


{% endblock %}