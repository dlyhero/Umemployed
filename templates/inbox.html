{% extends 'base.html' %}
{% load static %}
{% block title %}
    <title>Inbox | UmEmployed</title>
{% endblock title %}
{% block custom_css %}
<style>
  html, body {
    height: 100%;
    margin: 0;
  }

  .wrapper {
    display: flex;
    flex-direction: column;
    min-height: 85vh;
  }

  .content {
    flex: 1;
  }

  .chat-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
    background-color: #f9f9f9;
    border-radius: 8px;

  }

  .chat-header {
    font-size: 24px;
    font-weight: bold;
    margin-bottom: 20px;
    text-align: center;
  }

  .chat-list {
    list-style: none;
    padding: 0;
  }

  .chat-list li {
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 50px;
    margin-bottom: 10px;
    padding: 15px;
    transition: background-color 0.3s ease, transform 0.3s ease;
  }

  .chat-list li:hover {
    background-color: #f1f1f1;
    transform: translateY(-2px);
  }

  .chat-list a {
    text-decoration: none;
    color: #333;
    font-weight: 500;
    display: flex;
    align-items: center;
  }

  .chat-list a i {
    margin-right: 10px;
    color: #1e90ff;
  }

  .no-chats {
    text-align: center;
    color: #888;
    font-size: 18px;
    margin-top: 20px;
  }

  @media (max-width: 600px) {
    .chat-container {
      padding: 10px;
    }

    .chat-header {
      font-size: 20px;
    }

    .chat-list li {
      padding: 10px;
    }

    .no-chats {
      font-size: 16px;
    }
  }
</style>
{% endblock custom_css %}
{% block content %}
<div class="wrapper">
  <div class="content">
    <div class="chat-container border-b bg-white container max-w-5xl overflow-auto h-[70vh]">
      <div class="header mb-5 p-4 border-b flex flex-col sm:flex-row items-center sm:justify-between gap-4">
        <h2 class="text-xl font-bold text-gray-700">Chats</h2>
        <div class="relative w-full sm:max-w-md">
          <input 
            type="text" 
            placeholder="Search chats..." 
            class="w-full px-6 py-4 border rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          >
          <i class="fas fa-search absolute top-5 right-4 text-gray-400"></i>
        </div>
      </div>
      <ul class="chat-list divide-y divide-gray-200">
        {% for room in rooms %}
        <li class="p-6 hover:bg-gray-50 transition">
          <a href="{% url 'messaging:chat' room.id %}" class="flex items-center space-x-4 text-gray-700 hover:text-blue-600">
            <div class="w-12 h-11 flex justify-center items-center bg-blue-100 rounded-full">
              <i class="fa fa-user text-blue-500 ml-2"></i>
            </div>
            <div class="flex-1">
              <p class="font-semibold text-lg">
                {% if room.participant2 == request.user %}
                  {{ room.participant1.first_name }} {{ room.participant1.last_name }}
                {% else %}
                  {{ room.participant2.first_name }} {{ room.participant2.last_name }}
                {% endif %}
              </p>
              <p class="text-sm text-gray-500 truncate">This is the last message from the chat. It gives an idea of what was discussed.</p>
            </div>
            <div class="text-sm text-gray-400 whitespace-nowrap">
              Dec 18, 2024 10:45 AM
            </div>
          </a>
        </li>
        {% empty %}
          <li class="text-center py-16 text-gray-500">
            <i class="fas fa-inbox text-3xl text-gray-400 mb-4"></i>
            <p>No chat rooms available.</p>
          </li>
        {% endfor %}
      </ul>
    </div>
    
  </div>
  
  {% block footer %}
  {% endblock footer %}
 
</div>
{% endblock content %}