{% extends 'resume/base.html' %}
{% load static %}
{% block title %}
<title>{{company.name}} | UmEmployed</title>
{% endblock title %}

{% block custom_css %}
<link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
<script src="https://cdn.tailwindcss.com"></script>
{% endblock %}

{% block content %}
 <!-- Main Content -->
 <section class="">
    <div class="container max-w-7xl mx-auto px-4 mt-4">
        <!-- Grid Layout -->
        <div class="flex flex-col lg:flex-row gap-4">
            <!-- First Column: Company Overview Card -->
            <div class="flex-1">
                <!-- Company Header Card -->
                <div class="border border-gray-300  text-gray-900 bg-white py-10 rounded-lg flex flex-col lg:flex-row justify-between items-center px-6 md:px-12 space-y-6 lg:space-y-0">
                    <!-- Left: Company Info -->
                    <div class="flex flex-col md:flex-row items-center space-x-6 space-y-6 md:space-y-0">
                        <!-- Logo -->
                        <div class="company-logo bg-white p-4 rounded-full">
                            <img src="{{ company.logo.url }}" alt="Company Logo" class="w-16 h-16">
                        </div>
                        <!-- Company Details -->
                        <div class="text-center md:text-left">
                            <h1 class="text-3xl md:text-xl font-extrabold">{{ company.name }}</h1>
                            <p class="text-lg md:text-xl">{{ company.industry }} | {{ company.country.name }}</p>
                            <!-- Social Media -->
                            <div class="flex justify-center md:justify-start space-x-4 mt-4">
                                <a href="#" class=" hover:text-gray-300"><i class="fab fa-twitter text-lg"></i></a>
                                <a href="#" class=" hover:text-gray-300"><i class="fab fa-facebook text-lg"></i></a>
                                <a href="#" class=" hover:text-gray-300"><i class="fab fa-instagram text-lg"></i></a>
                                <a href="#" class=" hover:text-gray-300"><i class="fab fa-github text-lg"></i></a>
                            </div>
                        </div>
                    </div>
                    <!-- Right: Actions -->
                    <div class="flex flex-col lg:flex-row items-center space-y-4 lg:space-y-0 lg:space-x-6">
                        {% if is_owner %}
                        <a href="{% url 'update_company' company.id %}"
                           class="bg-white text-[#1e90ff] font-semibold px-5 py-3 rounded-full hover:bg-gray-100 flex items-center space-x-2">
                            <span>Edit Company</span> <i class="fas fa-edit"></i>
                        </a>
                        {% else %}
                        <button
                           class="border border-[#1e90ff] text-[#1e90ff] font-semibold px-5 py-3 rounded-full hover:bg-gray-100 flex items-center space-x-2">
                            <span>Follow</span> <i class="fas fa-plus"></i>
                        </button>
                        {% endif %}
                        <a href="{{ company.website_url }}"
                           class="text-white font-medium px-5 py-3 rounded-full bg-[#1e90ff] hover:bg-[#1e90aa] flex items-center space-x-2">
                            <span>Visit Website</span> <i class="fas fa-external-link-alt"></i>
                        </a>
                    </div>
                </div>

                <!-- Company Overview Card -->
                <div class="bg-white p-8 border border-gray-300 rounded-lg mt-2">
                    <h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-6 flex items-center">
                        <i class="fas fa-building text-blue-500 text-2xl mr-2"></i>
                        Company Overview
                    </h2>
                    <!-- About Us -->
                    <div class="mb-8 p-4 border-2 border-dashed rounded-lg">
                        <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                            <i class="fas fa-info-circle text-blue-500 text-xl mr-2"></i>
                            About Us
                        </h3>
                        <p class="text-gray-700">{{ company.description|safe }}</p>
                    </div>
                    <!-- Mission -->

                    <div class="text-xl p-4 border-2 border-dashed rounded-lg mt-2">
                        <h3 class="font-bold text-gray-900 mb-4 flex items-center">
                            <i class="fas fa-bullseye text-blue-500 text-xl mr-2"></i>
                            Our Mission
                        </h3>
                        <p class="text-gray-800">{{ company.mission_statement|safe }}</p>
                    </div>
                </div>

                <!-- Company Insights Section -->
                <section class="border border-gray-300 rounded-lg bg-white px-10 py-6 mt-2">
                    <!-- Section Header -->
                    <div class="mb-8">
                        <h2 class="text-3xl md:text-xl font-extrabold text-gray-800 flex items-center">
                            <i class="fas fa-chart-line text-blue-500 text-2xl mr-2"></i>
                            Company Insights
                        </h2>
                        <p class="text-gray-600 mt-2 text-lg">Learn more about our unique values and initiatives.</p>
                    </div>

                    <!-- Insights Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- Culture & Work Environment -->
                        <div class="flex flex-col items-center text-center bg-gradient-to-br from-gray-50 to-white p-8 rounded-lg border">
                            <div class="mb-4 bg-gray-100 p-4 rounded-full">
                                <i class="fas fa-users text-blue-500 text-3xl"></i>
                            </div>
                            <h3 class="text-2xl font-semibold text-gray-800 mb-4">Culture & Work Environment</h3>
                            <p class="text-gray-700 leading-relaxed">
                                At <span class="font-bold">{{company.name}}</span>, we foster a culture of innovation, collaboration, and respect.
                                Our team members enjoy flexible working conditions and continuous learning opportunities.
                            </p>
                        </div>

                        <!-- Sustainability Initiatives -->
                        <div class="flex flex-col items-center text-center bg-gradient-to-br from-gray-50 to-white p-8 rounded-lg border">
                            <div class="mb-4 bg-gray-100 p-4 rounded-full">
                                <i class="fas fa-leaf text-green-500 text-3xl"></i>
                            </div>
                            <h3 class="text-2xl font-semibold text-gray-800 mb-4">Sustainability Initiatives</h3>
                            <p class="text-gray-700 leading-relaxed">
                                We are committed to environmental sustainability. Through various initiatives, we aim to reduce our carbon footprint
                                and contribute positively to the planet.
                            </p>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Second Column: Open Positions and Company Stats -->
            <div class="w-full lg:w-[25%]">
                <!-- Open Positions Section -->
                <section class="mb-4 bg-white rounded-lg border border-gray-300 p-4">
                    <div class="px-2">
                        <h2 class="text-xl font-extrabold text-gray-900 flex items-center">
                            Open Positions
                        </h2>
                    </div>

                    <!-- Job Cards Grid -->
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 gap-2">
                        {% if jobs %}
                        {% for job in jobs %}
                        <div class="bg-gradient-to-r from-white via-gray-50 to-gray-100 hover:transition-all duration-300 border-b border-gray-300 overflow-hidden">
                            <!-- Job Card Body -->
                            <div class="p-2">
                                <!-- Job Title and Icon -->
                                <h4 class="text-xl font-bold text-gray-800 mb-1 flex items-center space-x-3">
                                    <span class="bg-blue-100 py-2 px-3 rounded-full">
                                        <i class="fa-solid fa-briefcase text-gray-500 text-xl"></i>
                                    </span>
                                    <span>{{ job.title }}</span>
                                </h4>

                                <div class="flex flex-col items-center">
                                    <!-- Job Location and Type -->
                                    <p class="text-gray-600 text-sm flex items-center space-x-2 mb-2">
                                        <i class="fa-solid fa-location-dot text-gray-400"></i>
                                        <span>{{ job.location.name }} | {{ job.job_location_type }}</span>
                                    </p>

                                    <!-- Apply Button or Status -->
                                    {% if job.id in applied_job_ids %}
                                    <span class=" text-gray-500 font-medium text-sm flex items-center space-x-2">
                                        <i class="fa-solid fa-check-circle text-green-500"></i>
                                        <span>Already Applied</span>
                                    </span>
                                    {% else %}
                                    <a href="{% url 'job:job_details' job.id %}"
                                       class="inline-block border border-[#1e90ff] text-[#1e90ff] py-2 px-5 mt-2 rounded-full text-sm font-semibold transition-colors duration-200 flex items-center space-x-2">
                                        <span>Apply Now</span> <i class="fas fa-arrow-right"></i>
                                    </a>
                                    {% endif %}
                                </div>
                            </div>

                            <!-- Footer for Owners (Edit/Delete Actions) -->
                            {% if is_owner %}
                            <div class="border-t border-gray-200 bg-gray-100 p-4 flex justify-between items-center">
                                <a href="{% url 'view_my_jobs' company.id %}"
                                   class="text-gray-500 font-medium text-sm hover:underline flex items-center space-x-2">
                                   <i class="fa-solid fa-edit"></i>
                                   <span>Edit</span>
                                </a>
                                <form action="{% url 'view_my_jobs' company.id %}" method="POST">
                                    {% csrf_token %}
                                    <button type="submit"
                                            class="text-gray-500 font-medium text-sm hover:underline flex items-center space-x-2">
                                        <i class="fa-solid fa-trash-alt"></i>
                                        <span>Delete</span>
                                    </button>
                                </form>
                            </div>
                            {% endif %}
                        </div>
                        {% endfor %}
                        {% else %}
                        <p class="text-gray-600 text-center col-span-3">No jobs available at the moment.</p>
                        {% endif %}
                    </div>
                    <div class="text-center mt-4">
                        <a href="{% url 'company-jobs-list' company.id %}"
                           class="text-gray-900 text-base font-medium transition-colors duration-200 inline-block mt-2 flex items-center justify-center space-x-2">
                            <span>View all jobs</span> <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </section>

                <!-- Company Stats Card -->
                <div class="bg-white mt-2 py-2 border border-gray-300 rounded-lg">
                    <!-- Founded -->
                    <div class="flex flex-col items-center">
                        <div class="bg-gray-100 p-4 rounded-full mb-4">
                            <i class="fas fa-calendar-alt text-blue-500 text-xl"></i>
                        </div>
                        <p class="text-gray-500">Founded</p>
                        <p class="text-lg font-bold text-gray-800">{{ company.founded }}</p>
                    </div>
                    <hr class="my-2">

                    <!-- Employees -->
                    <div class="flex flex-col items-center">
                        <div class="bg-gray-100 p-4 rounded-full mb-4">
                            <i class="fas fa-users text-blue-500 text-xl"></i>
                        </div>
                        <p class="text-gray-500">Employees</p>
                        <p class="text-lg font-bold text-gray-800">{{ company.size }}</p>
                    </div>
                    <hr class="my-2">

                    <!-- Headquarters -->
                    <div class="flex flex-col items-center">
                        <div class="bg-gray-100 p-4 rounded-full mb-4">
                            <i class="fas fa-map-marker-alt text-blue-500 text-xl"></i>
                        </div>
                        <p class="text-gray-500">Headquarters</p>
                        <p class="text-lg font-bold text-gray-800">{{ company.location }}</p>
                    </div>
                    <hr class="my-2">

                    <!-- Website -->
                    <div class="flex flex-col items-center">
                        <div class="bg-gray-100 p-4 rounded-full mb-4">
                            <i class="fas fa-globe text-blue-500 text-xl"></i>
                        </div>
                        <p class="text-gray-500">Website</p>
                        <a href="{{ company.website_url }}"
                           class="text-[#1e90ff] text-lg font-bold hover:underline flex items-center space-x-2">
                            <span>Visit Site</span> <i class="fas fa-external-link-alt"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- JavaScript for Dropdowns -->
<script>
    function toggleFilterDropdown() {
        const dropdown = document.getElementById('filter-dropdown');
        dropdown.classList.toggle('hidden');
    }

    function toggleMobileFilter() {
        const filterForm = document.getElementById('filter-form');
        filterForm.classList.toggle('hidden');
    }

    // Close dropdown if clicked outside
    window.onclick = function (event) {
        if (!event.target.matches('#desktop-filter-btn')) {
            const dropdown = document.getElementById('filter-dropdown');
            if (!dropdown.classList.contains('hidden')) {
                dropdown.classList.add('hidden');
            }
        }
    }
</script>
{% endblock %}
