{% extends 'resume/base.html' %}
{% load static %}
{% block title %}
<title>{{company.name}} | UmEmployed</title>
{% endblock title %}

{% block custom_css %}
<link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
<script src="https://cdn.tailwindcss.com"></script> 
{% endblock %}

{% block content %}
 <!-- Main Content -->
<main class="container mx-auto max-w-7xl p-6">
    <!-- Company Header with GitHub Icon and Gradient Background -->
  <!-- Header Section -->
<section class="bg-gradient-to-r from-blue-500 to-blue-700 text-white py-10 rounded-lg flex flex-col lg:flex-row justify-between items-center px-6 md:px-12 shadow-lg space-y-6 lg:space-y-0">
    <!-- Left: Company Info -->
    <div class="flex flex-col md:flex-row items-center space-x-6 space-y-6 md:space-y-0">
        <!-- Logo -->
        <div class="company-logo bg-white p-4 rounded-full">
            <img src="{{ company.logo.url }}" alt="Company Logo" class="w-16 h-16">
        </div>
        <!-- Company Details -->
        <div class="text-center md:text-left">
            <h1 class="text-3xl md:text-4xl font-extrabold">{{ company.name }}</h1>
            <p class="text-lg md:text-xl">{{ company.industry }} | {{ company.country.name }}</p>
            <!-- Social Media -->
            <div class="flex justify-center md:justify-start space-x-4 mt-4">
                <a href="#" class="text-white hover:text-gray-300"><i class="fab fa-twitter text-lg"></i></a>
                <a href="#" class="text-white hover:text-gray-300"><i class="fab fa-facebook text-lg"></i></a>
                <a href="#" class="text-white hover:text-gray-300"><i class="fab fa-instagram text-lg"></i></a>
                <a href="#" class="text-white hover:text-gray-300"><i class="fab fa-github text-lg"></i></a>
            </div>
        </div>
    </div>
    <!-- Right: Actions -->
    <div class="flex flex-col lg:flex-row items-center space-y-4 lg:space-y-0 lg:space-x-6">
        {% if is_owner %}
        <a href="{% url 'update_company' company.id %}" 
           class="bg-white text-blue-700 font-semibold px-5 py-3 rounded-full shadow hover:bg-gray-100 flex items-center space-x-2">
            <span>Edit Company</span> <i class="fas fa-edit"></i>
        </a>
        {% else %}
        <button 
           class="bg-white text-blue-700 font-semibold px-5 py-3 rounded-full shadow hover:bg-gray-100 flex items-center space-x-2">
            <span>Follow</span> <i class="fas fa-plus"></i>
        </button>
        {% endif %}
        <a href="{{ company.website_url }}" 
           class="text-white font-medium px-5 py-3 rounded-full bg-blue-600 hover:bg-blue-500 shadow">
           Visit Website
        </a>
    </div>
</section>

<!-- Company Overview Section -->
<section class="mt-12 py-12 border-y">
    <div class="max-w-7xl mx-auto px-6 lg:px-12">
        <!-- Header -->
        <div class="text-center mb-12">
            <h2 class="text-4xl md:text-5xl font-extrabold text-gray-800">Discover Our Story</h2>
            <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">
                Learn more about who we are, what drives us, and our journey to success.
            </p>
        </div>
        <!-- Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            <!-- About & Mission -->
            <div>
                <!-- About Us -->
                <div class="bg-white p-8 rounded-lg  mb-8 border-l-4 border-blue-500">
                    <h3 class="text-2xl font-bold text-[#1e90ff] mb-4">About Us</h3>
                    <p class="text-gray-700">{{ company.description|safe }}</p>
                </div>
                <!-- Mission -->
                <div class="bg-blue-50 p-8 rounded-lg  border-l-4 border-[#1e90ff]">
                    <h3 class="text-2xl font-bold text-[#1e90ff] mb-4">Our Mission</h3>
                    <p class="text-gray-800">{{ company.mission_statement|safe }}</p>
                </div>
            </div>
            <!-- Company Stats -->
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-8">
                <!-- Founded -->
                <div class="flex flex-col items-center border bg-white p-6 rounded-lg ">
                    <div class="bg-blue-100 p-4 rounded-full mb-4">
                        <i class="fas fa-calendar-alt text-blue-500 text-4xl"></i>
                    </div>
                    <p class="text-gray-500">Founded</p>
                    <p class="text-lg font-bold text-gray-800">{{ company.founded }}</p>
                </div>
                <!-- Employees -->
                <div class="flex flex-col items-center bg-white p-6 rounded-lg border">
                    <div class="bg-green-100 p-4 rounded-full mb-4">
                        <i class="fas fa-users text-green-500 text-4xl"></i>
                    </div>
                    <p class="text-gray-500">Employees</p>
                    <p class="text-lg font-bold text-gray-800">{{ company.size }}</p>
                </div>
                <!-- Headquarters -->
                <div class="flex flex-col items-center bg-white p-6 rounded-lg border">
                    <div class="bg-yellow-100 p-4 rounded-full mb-4">
                        <i class="fas fa-map-marker-alt text-yellow-500 text-4xl"></i>
                    </div>
                    <p class="text-gray-500">Headquarters</p>
                    <p class="text-lg font-bold text-gray-800">{{ company.location }}</p>
                </div>
                <!-- Website -->
                <div class="flex flex-col items-center bg-white p-6 rounded-lg border">
                    <div class="bg-purple-100 p-4 rounded-full mb-4">
                        <i class="fas fa-globe text-purple-500 text-4xl"></i>
                    </div>
                    <p class="text-gray-500">Website</p>
                    <a href="{{ company.website_url }}" 
                       class="text-[#1e90ff] text-lg font-bold hover:underline">
                        Visit Site
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>


<section class="mt-16 px-6">
    <!-- Section Header -->
    <div class="text-center mb-10">
        <h2 class="text-4xl font-extrabold text-gray-900">Open Positions</h2>
        <a href="{% url 'company-jobs-list' company.id %}" 
           class="text-blue-600 hover:text-blue-800 text-base font-medium transition-colors duration-200 inline-block mt-2">
            View all jobs
        </a>
    </div>

    <!-- Job Cards Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {% if jobs %}
        {% for job in jobs %}
        <div class="bg-gradient-to-r from-white via-gray-50 to-gray-100 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 border border-gray-300 overflow-hidden">
            <!-- Job Card Body -->
            <div class="p-6">
                <!-- Job Title and Icon -->
                <h4 class="text-2xl font-bold text-gray-800 mb-3 flex items-center space-x-3">
                    <span class="bg-blue-50 p-3 rounded-full">
                        <i class="fa-solid fa-briefcase text-blue-600 text-xl"></i>
                    </span>
                    <span>{{ job.title }}</span>
                </h4>

                <!-- Job Location and Type -->
                <p class="text-gray-600 text-sm flex items-center space-x-2 mb-4">
                    <i class="fa-solid fa-location-dot text-gray-400"></i>
                    <span>{{ job.location.name }} | {{ job.job_location_type }}</span>
                </p>

                <!-- Apply Button or Status -->
                {% if job.id in applied_job_ids %}
                <span class="text-green-500 font-medium text-sm flex items-center space-x-2">
                    <i class="fa-solid fa-check-circle"></i>
                    <span>Already Applied</span>
                </span>
                {% else %}
                <a href="{% url 'job:job_details' job.id %}" 
                   class="inline-block bg-blue-600 text-white py-2 px-5 mt-4 rounded-full text-sm font-semibold hover:bg-blue-700 transition-colors duration-200">
                    Apply Now
                </a>
                {% endif %}
            </div>

            <!-- Footer for Owners (Edit/Delete Actions) -->
            {% if is_owner %}
            <div class="border-t border-gray-200 bg-gray-100 p-4 flex justify-between items-center">
                <a href="{% url 'view_my_jobs' company.id %}" 
                   class="text-yellow-500 font-medium text-sm hover:underline flex items-center space-x-2">
                   <i class="fa-solid fa-edit"></i>
                   <span>Edit</span>
                </a>
                <form action="{% url 'view_my_jobs' company.id %}" method="POST">
                    {% csrf_token %}
                    <button type="submit" 
                            class="text-red-500 font-medium text-sm hover:underline flex items-center space-x-2">
                        <i class="fa-solid fa-trash-alt"></i>
                        <span>Delete</span>
                    </button>
                </form>
            </div>
            {% endif %}
        </div>
        {% endfor %}
        {% else %}
        <p class="text-gray-600 text-center col-span-3">No jobs available at the moment.</p>
        {% endif %}
    </div>
</section>
                                                                                                                                                                                                                                                                                                                                                         

    
    <!-- Company Insights Section -->
    <section class="mt-6 md:mt-10 border-t py-6">
        <!-- Section Header -->
        <div class="text-center mb-8">
            <h2 class="text-3xl md:text-4xl font-extrabold text-gray-800">Company Insights</h2>
            <p class="text-gray-600 mt-2 text-lg">Learn more about our unique values and initiatives.</p>
        </div>
    
        <!-- Insights Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Culture & Work Environment -->
            <div class="flex flex-col items-center text-center bg-gradient-to-br from-blue-50 to-white p-8 rounded-lg  border">
                <div class="mb-4 bg-blue-100 p-4 rounded-full">
                    <i class="fas fa-users text-blue-600 text-3xl"></i>
                </div>
                <h3 class="text-2xl font-semibold text-gray-800 mb-4">Culture & Work Environment</h3>
                <p class="text-gray-700 leading-relaxed">
                    At <span class="font-bold">{{company.name}}</span>, we foster a culture of innovation, collaboration, and respect. 
                    Our team members enjoy flexible working conditions and continuous learning opportunities.
                </p>
            </div>
    
            <!-- Sustainability Initiatives -->
            <div class="flex flex-col items-center text-center bg-gradient-to-br from-green-50 to-white p-8 rounded-lg  border">
                <div class="mb-4 bg-green-100 p-4 rounded-full">
                    <i class="fas fa-leaf text-green-600 text-3xl"></i>
                </div>
                <h3 class="text-2xl font-semibold text-gray-800 mb-4">Sustainability Initiatives</h3>
                <p class="text-gray-700 leading-relaxed">
                    We are committed to environmental sustainability. Through various initiatives, we aim to reduce our carbon footprint 
                    and contribute positively to the planet.
                </p>
            </div>
        </div>
    </section>
    
</main>

<!-- JavaScript for Dropdowns -->
<script>
    function toggleFilterDropdown() {
        const dropdown = document.getElementById('filter-dropdown');
        dropdown.classList.toggle('hidden');
    }

    function toggleMobileFilter() {
        const filterForm = document.getElementById('filter-form');
        filterForm.classList.toggle('hidden');
    }

    // Close dropdown if clicked outside
    window.onclick = function (event) {
        if (!event.target.matches('#desktop-filter-btn')) {
            const dropdown = document.getElementById('filter-dropdown');
            if (!dropdown.classList.contains('hidden')) {
                dropdown.classList.add('hidden');
            }
        }
    }
</script>
{% endblock %}