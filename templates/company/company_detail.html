{% extends 'resume/base.html' %}
{% load static %}
{% block title %}
<title>{{company.name}} | UmEmployed</title>
{% endblock title %}

{% block custom_css %}
<link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
<script src="https://cdn.tailwindcss.com"></script> 
{% endblock %}

{% block content %}
 <!-- Main Content -->
<main class="container mx-auto max-w-7xl p-6">
    <!-- Company Header with GitHub Icon and Gradient Background -->
    <section class="bg-gradient-to-r from-[#4248BD] to-[#1e90ff] text-white py-6 md:py-10 rounded-lg flex flex-col lg:flex-row justify-between items-center px-4 md:px-10 shadow-md space-y-4 lg:space-y-0">
        <div class="flex flex-col md:flex-row items-center space-x-4 md:space-x-6 space-y-4 md:space-y-0">
            <div class="company-logo bg-white p-3 md:p-4 rounded-full">
                <img src="{{company.logo.url}}" alt="Company Logo" class="w-12 h-12 md:w-16 md:h-16">
            </div>
            <div class="text-center md:text-left">
                <h1 class="text-2xl md:text-4xl font-bold">{{company.name}}</h1>
                <p class="text-sm md:text-xl">{{company.industry}} | {{company.country.name}}</p>
                <div class="flex justify-center md:justify-start space-x-2 md:space-x-4 mt-2">
                    <a href="#" class="text-white hover:text-gray-300">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" class="text-white hover:text-gray-300">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="#" class="text-white hover:text-gray-300">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="#" class="text-white hover:text-gray-300">
                        <i class="fab fa-github"></i>
                    </a>
                </div>
            </div>
        </div>
        <div class="flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:space-x-6 items-center">
            {% if is_owner %}
            <a href="{% url 'update_company' company.id %}" class="bg-white text-[#1e90ff] font-medium px-4 py-2 rounded-full shadow hover:bg-gray-100 flex items-center">
                Edit Company <i class="fas fa-edit ml-2"></i>
            </a>
            {% else %}
            <button class="bg-white text-[#1e90ff] font-medium px-4 py-2 rounded-full shadow hover:bg-gray-100 flex items-center">
                Follow <i class="fas fa-plus ml-2"></i>
            </button>
            {% endif %}
            <a href="{{ company.website_url }}" class="text-white font-medium no-underline hover:underline">Visit Website</a>
        </div>
    </section>

    <!-- Company Overview Section -->
    <section class="mt-6 md:mt-10">
        <h2 class="text-2xl md:text-3xl font-bold mb-4">Company Overview</h2>
        <p class="text-gray-900 mb-6">
            {{ company.description|safe }}
        </p>
        <br>
        <p>{{ company.mission_statement|safe }}</p>
        <br>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-2 md:gap-4">
            <div class="flex items-center">
                <i class="fas fa-calendar-alt mr-2 text-gray-600"></i>
                <div>
                    <p class="font-medium text-gray-600">Founded</p>
                    <p class="text-gray-800">{{ company.founded }}</p>
                </div>
            </div>
            <div class="flex items-center">
                <i class="fas fa-users mr-2 text-gray-600"></i>
                <div>
                    <p class="font-medium text-gray-600">Employees</p>
                    <p class="text-gray-800">{{ company.size }}</p>
                </div>
            </div>
            <div class="flex items-center">
                <i class="fas fa-map-marker-alt mr-2 text-gray-600"></i>
                <div>
                    <p class="font-medium text-gray-600">Headquarters</p>
                    <p class="text-gray-800">{{ company.location }}</p>
                </div>
            </div>
            <div class="flex items-center">
                <i class="fas fa-globe mr-2 text-gray-600"></i>
                <div>
                    <p class="font-medium text-gray-600">Website</p>
                    <a href="{{ company.website_url }}" class="text-[#1e90ff] no-underline hover:underline">{{ company.website_url }}</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Open Positions Section -->
    <section class="mt-6 md:mt-10">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl md:text-3xl font-bold">Open Positions</h2>
            <a href="{% url 'company-jobs-list' company.id %}" class="text-[#1e90ff] hover:underline text-sm md:text-base">View all jobs</a>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            {% if jobs %}
            {% for job in jobs %}
            <div class="border border-gray-300 rounded-lg p-4 shadow hover:shadow-md transition-all">
                <div class="flex justify-between items-center mb-4">
                    <div>
                        <h4 class="text-lg md:text-xl font-bold">{{job.title}}</h4>
                        <p class="text-sm md:text-base text-gray-500 capitalize">{{job.location.name}} | {{job.job_location_type}}</p>
                    </div>
                    <!-- Apply Now Button or Already Applied -->
                    {% if job.id in applied_job_ids %}
                    <span style="color: green;">(Already Applied)</span>
                    {% else %}
                    <div class="flex space-x-2">
                        <a href="{% url 'job:job_details' job.id %}" class="text-[#1e90ff] border border-[#1e90ff] px-3 py-1 md:px-4 md:py-2 rounded-full">Apply</a>
                    </div>
                    {% endif %}
                </div>
                <div class="flex items-center space-x-2">
                    <span class="text-sm text-green-600 font-medium capitalize">{{job.job_location_type}}</span>
                </div>
                {% if is_owner %}
                <div class="mt-4 flex space-x-2">
                    <a href="{% url 'view_my_jobs' company.id %}" class="text-yellow-500 border border-yellow-500 px-3 py-1 md:px-4 md:py-2 rounded-full">Edit</a>
                    <form action="{% url 'view_my_jobs' company.id %}" method="POST">
                        {% csrf_token %}
                        <button type="submit" class="text-red-500 border border-red-500 px-3 py-1 md:px-4 md:py-2 rounded-full">Delete</button>
                    </form>
                </div>
                {% endif %}
            </div>
            {% endfor %}
            {% else %}
            <p>No jobs available at the moment.</p>
            {% endif %}
        </div>
    </section>

    <!-- Company Insights Section -->
    <section class="mt-6 md:mt-10">
        <h2 class="text-2xl md:text-3xl font-bold mb-4">Company Insights</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-gray-100 p-6 rounded-lg shadow-md">
                <h3 class="text-xl font-bold mb-2">Culture & Work Environment</h3>
                <p class="text-gray-700">
                    At {{company.name}}, we foster a culture of innovation, collaboration, and respect. Our team members enjoy
                    flexible working conditions and continuous learning opportunities.
                </p>
            </div>
            <div class="bg-gray-100 p-6 rounded-lg shadow-md">
                <h3 class="text-xl font-bold mb-2">Sustainability Initiatives</h3>
                <p class="text-gray-700">
                    We are committed to environmental sustainability. Through various initiatives, we aim to reduce our carbon
                    footprint and contribute positively to the planet.
                </p>
            </div>
        </div>
    </section>
</main>

<!-- JavaScript for Dropdowns -->
<script>
    function toggleFilterDropdown() {
        const dropdown = document.getElementById('filter-dropdown');
        dropdown.classList.toggle('hidden');
    }

    function toggleMobileFilter() {
        const filterForm = document.getElementById('filter-form');
        filterForm.classList.toggle('hidden');
    }

    // Close dropdown if clicked outside
    window.onclick = function (event) {
        if (!event.target.matches('#desktop-filter-btn')) {
            const dropdown = document.getElementById('filter-dropdown');
            if (!dropdown.classList.contains('hidden')) {
                dropdown.classList.add('hidden');
            }
        }
    }
</script>
{% endblock %}