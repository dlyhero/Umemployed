{% extends 'base.html' %}
{% load static %}
{% block title %}
    <title>Inbox | UmEmployed</title>
    <link rel="stylesheet" href="./m.css">
{% endblock title %}
{% block custom_css %}
<style>
  header{
    border-bottom: 1px solid gray;
  }
  body{
      height: 100vh;
      margin: 0;
      padding: 0;
      overflow: hidden;
  }

  /* Mobile Layout Adjustments */
  @media (max-width: 768px) {
    .inbox {
      display: block;  /* Ensure inbox is shown */
    }
    .chat {
      display: none;  /* Hide chat initially */
    }
    .chat.show {
      display: block;  /* Show chat when contact is clicked */
    }
  }

  /* Desktop Layout: Inbox and Chat side by side */
  @media (min-width: 768px) {
    .inbox {
      display: block;  /* Show inbox */
    }
    .chat {
      display: block;  /* Show chat */
    }
  }

  .msg-profile {
    border-radius: 50%;
    object-fit: cover;
  }

  .bubble.send::before {
    top: -8px;
    left: 10px;
    border-bottom: 10px solid #e7e5e5;
  }

  .bubble.receive::before {
    border-bottom: 10px solid #1e90ff;
    top: -8px;
    right: 10px;
  }

  .bubble::before {
    content: '';
    position: absolute;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
  }

  .bubble {
    position: relative;
    border-radius: 10px;
  }

  .bubble p {
    margin: 0;
  }v

  .message {
    word-wrap: break-word;
  }
</style>
{% endblock custom_css %}
{% block content %}
<div class="wrapper">
  <div class="Chat-wrapper cborder mx-auto h-[91vh] md:h-[85vh] flex  rounded">
    <div class="inbox relative bg-gray-50 w-full lg:w-[40%]">
        <div class="header border  text-xl font-semibold p-7 bg-white text-center absolute top-0 left-0 right-0 border-b">
            <h1>Memberchat</h1>
        </div>
        <div class="contacts rounded h-[90vh] lg:h-[80vh] overflow-y-auto mt-28 bg-white px-2 py-6 border-y flex flex-col gapx-2 gap-y-5">
            <div class="contact border hover:bg-blue-50 p-2 rounded-lg flex items-center gap-2" onclick="openChatRoom()">
                <div class="image-wrap p-3 rounded-full bg-gray-100">
                    <img class="msg-profile w-[34px] h-[34px] md:w-[44px] md:h-[44px]" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/3364143/download+%281%29.png" alt="" />
                </div>
                <div class="contact-name text-[18px] font-semibold text-gray-800">Eccentric Bana</div>
            </div>
            <div class="contact border hover:bg-blue-50 p-2 rounded-lg flex items-center gap-2" onclick="openChatRoom()">
                <div class="image-wrap p-3 rounded-full bg-gray-100">
                    <img class="msg-profile w-[34px] h-[34px] md:w-[44px] md:h-[44px]" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/3364143/download+%281%29.png" alt="" />
                </div>
                <div class="contact-name text-[18px] font-semibold text-gray-800">Eccentric Bana</div>
            </div>
        </div>
    </div>

    <div class="chat hidden lg:block border-l w-full lg:w-[60%] h-full relative">
        <!-- Chat content here -->
        <div class="chat-header bg-white absolute z-50 left-0 right-0 top-0 border-b p-2 flex flex-col gap-2">
            <div class="contact flex items-center gap-2">
                <div class="image-wrap p-3 rounded-full bg-gray-100">
                    <img class="msg-profile w-[34px] h-[34px] md:w-[44px] md:h-[44px]" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/3364143/download+%281%29.png" alt="" />
                </div>
                <div class="contact-name text-[18px] font-semibold text-gray-800">Eccentric Bana</div>
            </div>
        </div>
        <div class="chat-room z-0 h-full py-24 overflow-y-auto relative">
          <div class="p-4 flex flex-col space-y-5" id="messages-container">
            <div class="receiver flex space-x-2">
              <img class="msg-profile w-[34px] h-[34px] md:w-[44px] md:h-[44px]" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/3364143/download+%281%29.png" alt="" />
              <div class="receiver mt-8 bubble send flex flex-col p-2 bg-gray-100 text-gray-700 w-fit min-w-[100px]  max-w-[80%]">
                  <div class="receiver text-[#1e90ff] font-semibold">Enu</div>
                  <div class="message ">Lorem ipsum dolor sit, amet consectetur Lorem ipsum, dolor Lorem ipsum dolor sit amet consectetur, adipisicing elit. Voluptatem vel necessitatibus natus dolore magni voluptatum voluptas dolor atque, dolorem quasi sed error, exercitationem ipsa ab itaque facilis? Eveniet rem iure similique optio adipisci. sit amet consectetur adipisicing elit. Facilis atque sed labore modi odit laudantium quisquam dolorum in eaque illo! adipisiciddddng elit. Quis nam officia ut modi distinctio vitae ipsum dignissimos ipsa, in doloremque iste exercitationem! Corporis, voluptas aut reiciendis placeat ratione sunt est maiores minima pariatur reprehenderit cum sint alias autem, eligendi illum.</div>
                  <div class="date text-right text-gray-500">8.53 PM</div>
              </div>
          </div>
              <!-- Messages will appear here -->
          </div>
        </div>
        <form id="form" action="" class="absolute bg-slate-100 bottom-0 px-2 py-3 left-0 right-0 ">
          <div class="flex items-center w-full b rounded relative gap-2">
              <!-- Attachment Icon -->
              <button type="button" id="attachment-btn" class="py-1 px-2 bg-gray-200 text-gray-600 rounded-full hover:bg-gray-300 transition-all">
                  <i class="fas fa-paperclip text-lg"></i>
              </button>
      
              <!-- Sticker/Icon Button -->
              <button type="button" id="sticker-btn" class="py-1 px-2 bg-gray-200 text-gray-600 rounded-full hover:bg-gray-300 transition-all ml-2">
                  <i class="fas fa-smile text-lg"></i>
              </button>
      
              <!-- Input field -->
              <input type="text" id="chat-message-input" name="text" placeholder="Message..." class="min-w-[100px] flex-1 border outline-none rounded-lg p-3">
              
              <!-- Send Button -->
              <button type="submit" id="chat-message-submit" class="py-1 pl-2 bg-[#1e90ff] pr-3 text-white rounded-full">
                  <i class="fas fa-paper-plane text-lg"></i>
              </button>
          </div>
      
          <!-- Attachment Modal (hidden by default) -->
          <div id="attachment-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-50 flex justify-center items-center z-50">
              <div class="bg-white rounded-lg p-6">
                  <h3 class="text-xl font-semibold mb-4">Upload Attachment</h3>
                  <input type="file" id="attachment-file" class="mb-4">
                  <button type="button" class="p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-all">Upload</button>
                  <button type="button" id="close-attachment" class="p-2 bg-gray-300 text-black rounded-full hover:bg-gray-400 transition-all mt-4">Close</button>
              </div>
          </div>
      
          <!-- Sticker Modal (hidden by default) -->
          <div id="sticker-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-50 flex justify-center items-center z-50">
              <div class="bg-white rounded-lg p-6">
                  <h3 class="text-xl font-semibold mb-4">Pick a Sticker</h3>
                  <!-- Add sticker picker elements here (could be image grids or emojis) -->
                  <div class="grid grid-cols-4 gap-4">
                      <img src="sticker1.png" alt="sticker1" class="cursor-pointer" />
                      <img src="sticker2.png" alt="sticker2" class="cursor-pointer" />
                      <img src="sticker3.png" alt="sticker3" class="cursor-pointer" />
                      <img src="sticker4.png" alt="sticker4" class="cursor-pointer" />
                  </div>
                  <button type="button" id="close-sticker" class="p-2 bg-gray-300 text-black rounded-full hover:bg-gray-400 transition-all mt-4">Close</button>
              </div>
          </div>
      </form>
    </div>
  </div>
</div>

<script>
  // Function to toggle inbox and chat visibility on mobile
  function openChatRoom() {
      const inbox = document.querySelector('.inbox');
      const chat = document.querySelector('.chat');
      
      // On mobile, hide inbox and show chat
      if (window.innerWidth <= 768) {
          inbox.style.display = 'none';  // Hide inbox
          chat.classList.add('show');  // Show chat by adding the 'show' class
      }
  }

  // Handle sending a message
  document.getElementById('form').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const messageInput = document.getElementById('chat-message-input');
      const messageText = messageInput.value.trim();
      
      if (messageText) {
          const chatRoom = document.querySelector('.chat-room');
          const messageDiv = document.createElement('div');
          messageDiv.classList.add('sender', 'flex', 'space-x-2', 'justify-end', 'p-4');
          
          messageDiv.innerHTML = `
              <div class="sender-msg mt-8 bubble receive flex flex-col p-2 bg-[#1e90ff] text-white w-fit min-w-[100px] max-w-[80%]">
                  <div class="message">${messageText}</div>
                  <div class="date text-right text-white">Just Now</div>
              </div>
          `;
          chatRoom.appendChild(messageDiv);
          chatRoom.scrollTop = chatRoom.scrollHeight;  // Scroll to bottom
          messageInput.value = '';  // Clear input
      }
  });
  
</script>

{% block footer %}
{% endblock footer %}
{% endblock content %}
